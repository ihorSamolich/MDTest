(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{1522:function(e,t,r){Promise.resolve().then(r.bind(r,8695))},8695:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),s=r(2265),n=r(2670),l=r(224),d=r(703),i=r(2846),c=e=>{let{item:t}=e,r=(0,l.T)();return(0,a.jsxs)("div",{className:"m-4 group relative rounded-xl p-4 border border-blue-900 max-h-[150px] gap-4 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"overflow-hidden rounded-md relative w-40 h-20",children:(0,a.jsx)(d.default,{src:"".concat("https://md.ihor.fun","/images/").concat(t.medicate.image),alt:t.medicate.name,className:"object-fill object-center",fill:!0,sizes:"(max-width: 768px) 500px, (max-width: 1200px) 700px, 800px"})})}),(0,a.jsxs)("div",{className:"w-1/2 flex-col",children:[(0,a.jsx)("h3",{className:"text-center font-bold text-lg text-gray-700",children:t.medicate.name}),(0,a.jsxs)("p",{className:" text-center text-sm font-medium text-gray-900",children:["Price: $",t.medicate.price]}),(0,a.jsx)("input",{type:"number",onChange:e=>{let a=parseInt(e.target.value,10);r((0,i.Xq)({...t.medicate,quantity:a}))},value:t.count,className:"text-sm rounded-lg text-center block w-full p-1",required:!0,min:"1"}),(0,a.jsx)("button",{onClick:()=>{r((0,i.h2)(t.medicate.id))},className:"bg-red-500 w-full text-white px-2 rounded-xl text-sm font-bold mt-2",children:"Remove"})]})]})};let o=async e=>{try{let t=await fetch("".concat("https://md.ihor.fun","/api/orders"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return t.ok||console.error("Error creating order!"),t.json()}catch(e){console.error("Error creating order:",e)}};var m=r(7907),u=r(940),x=()=>{let e=(0,m.useRouter)(),t=(0,l.T)();(0,s.useEffect)(()=>{let e=(0,u.Hj)();e&&t((0,i.RV)(e))},[t]);let{register:r,formState:{errors:d}}=(0,n.cI)(),[x,h]=(0,s.useState)({address:"",email:"",phone:"",name:""}),p=(0,l.C)(e=>e.cart.items),f=async()=>{x.name&&x.address&&x.email&&x.phone&&p.length?await o({items:p,customer:x})?(t((0,i.LL)()),alert("Замовлення успішно створено!"),e.push("/")):alert("Помилка створення замовлення, перевірте дані!"):alert("Заповніть всі поля!")},b=e=>{let{name:t,value:r}=e.target;h(e=>({...e,[t]:r}))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"col-span-4 border-2 border-black rounded-xl py-4",children:[(0,a.jsx)("h1",{className:"font-extrabold text-2xl text-center",children:"Customer info:"}),(0,a.jsxs)("form",{className:"px-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name:"}),(0,a.jsx)("input",{type:"text",id:"name",...r("name",{required:!0}),onChange:b,className:"mt-1 p-2 w-full border border-gray-300 rounded-md"}),d.name&&(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Name is required"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email:"}),(0,a.jsx)("input",{type:"email",id:"email",...r("email",{required:!0}),onChange:b,className:"mt-1 p-2 w-full border border-gray-300 rounded-md"}),d.email&&(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Email is required"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone:"}),(0,a.jsx)("input",{type:"tel",id:"phone",...r("phone"),onChange:b,className:"mt-1 p-2 w-full border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address:"}),(0,a.jsx)("input",{id:"address",...r("address",{required:!0}),onChange:b,className:"mt-1 p-2 w-full border border-gray-300 rounded-md"}),d.address&&(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Address is required"})]})]})]}),(0,a.jsx)("div",{className:"overflow-hidden col-span-2 border-2 border-black rounded-xl",children:(0,a.jsxs)("div",{className:"h-[500px] overflow-y-auto",children:[(0,a.jsx)("h1",{className:"font-extrabold text-2xl text-center",children:"Cart:"}),null==p?void 0:p.map((e,t)=>(0,a.jsx)(c,{item:e},e.medicate.id))]})}),(0,a.jsxs)("div",{className:" col-span-6 flex justify-end items-center gap-10",children:[(0,a.jsxs)("p",{children:["Total Price: $",(()=>{let e=0;for(let t of p)e+=t.medicate.price*t.count;return e})()]}),(0,a.jsx)("button",{onClick:f,className:"bg-green-500 text-white px-4 py-2 rounded-md",children:"Submit"})]})]})}},2846:function(e,t,r){"use strict";r.d(t,{LL:function(){return c},RV:function(){return l},Xq:function(){return d},h2:function(){return i}});var a=r(5972),s=r(940);let n=(0,a.oM)({name:"cart",initialState:{items:[]},reducers:{addToCart:(e,t)=>{let r=e.items.findIndex(e=>e.medicate.id===t.payload.id);-1!==r?e.items[r].count=t.payload.quantity:e.items.push({medicate:t.payload,count:1}),(0,s.Jr)(e)},removeFromCart:(e,t)=>{e.items=e.items.filter(e=>e.medicate.id!==t.payload),(0,s.Jr)(e)},clearCart:e=>{e.items=[],(0,s.ZL)()},setCart:(e,t)=>t.payload}}),{setCart:l,addToCart:d,removeFromCart:i,clearCart:c}=n.actions;t.ZP=n.reducer},224:function(e,t,r){"use strict";r.d(t,{C:function(){return n},T:function(){return s}});var a=r(828);let s=a.I0,n=a.v9},940:function(e,t,r){"use strict";r.d(t,{Hj:function(){return s},Jr:function(){return a},ZL:function(){return n}});let a=e=>{localStorage.setItem("cart",JSON.stringify(e))},s=()=>{let e=localStorage.getItem("cart");return e?JSON.parse(e):null},n=()=>{localStorage.removeItem("cart")}}},function(e){e.O(0,[403,703,884,971,69,744],function(){return e(e.s=1522)}),_N_E=e.O()}]);